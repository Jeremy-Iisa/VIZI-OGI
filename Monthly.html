<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>VIZI OGI - Payment Page</title>
<!-- Font Awesome CDN for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  /* Reset styles */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Arial', sans-serif;
    background-color: #0d1b2a; /* Dark blue theme */
    color: #ffffff;
    line-height: 1.6;
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }

  /* Header styles */
  header {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    padding: 20px 40px;
    background-color: #142b46;
  }

  /* Back button style */
  .back-button {
    display: inline-block;
    padding: 10px 15px;
    background-color: #4CAF50;
    color: #fff;
    border-radius: 5px;
    text-decoration: none;
    transition: background-color 0.3s;
  }

  .back-button:hover {
    background-color: #3e8e41;
  }

  /* Main content styles */
.main-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 40px 20px;
}

.icons-container {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-bottom: 20px;
}

/* Payment form styles */
.payment-form {
  background-color: #142b46;
  padding: 30px;
  border-radius: 10px;
  max-width: 400px;
  width: 100%;
}

.payment-form h2 {
  margin-bottom: 20px;
  text-align: center;
}

.payment-form label {
  display: block;
  margin-bottom: 5px;
  margin-top: 15px;
}

.payment-form input {
  width: 100%;
  padding: 10px;
  border: 1px solid #555;
  border-radius: 5px;
  background-color: #0d1b2a;
  color: #fff;
}

#card-number {
  font-family: 'Arial', sans-serif;
}

/* Warning message style */
#expiry-warning {
  color: #ff4d4d;
  font-size: 0.9em;
  margin-top: 5px;
  display: none;
}

/* Pay button styles */
.pay-button {
  display: block;
  width: 100%;
  margin-top: 30px;
  padding: 12px;
  background-color: #4CAF50;
  color: #fff;
  font-size: 16px;
  border-radius: 5px;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  opacity: 0.6; /* disabled appearance */
  pointer-events: none; /* disable click by default */
  transition: opacity 0.3s;
}

.pay-button.enabled {
  opacity: 1;
  pointer-events: auto;
}

.pay-button:hover.enabled {
  background-color: #3e8e41;
}

/* Footer styles */
footer {
  background-color: #142b46;
  padding: 30px 20px;
  text-align: center;
}
footer p {
  margin-bottom: 10px;
}

/* Icons of MasterCard, Visa, Amazon below form */
.payment-icons {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 20px;
  margin-top: 20px;
}

.payment-icons i {
  font-size: 50px;
  cursor: default;
}

/* MTN icon with link */
.mtn-link {
  margin-top: 20px;
}

.mtn-link img {
  height: 50px;
  width: auto;
  cursor: pointer;
  transition: transform 0.2s;
}

.mtn-link img:hover {
  transform: scale(1.1);
}

/* Responsive styles */
@media(max-width: 500px) {
  .payment-form {
    max-width: 90%;
  }
}
</style>
</head>
<body>

<header>
  <a href="subscribe.html" class="back-button">Back to Subscription</a>
</header>

<div class="main-content">
  <!-- Payment form -->
  <form class="payment-form" id="paymentForm" action="nextpage.html" method="GET">
    <h2>Payment Details</h2>
    <label for="cardType">Card Type</label>
    <input type="text" id="cardType" name="cardType" readonly placeholder="Detected Card Type" />

    <label for="cardNumber">Card Number</label>
    <input type="text" id="card-number" name="cardNumber" maxlength="19" placeholder="Enter your card number" required />

    <label for="cardHolder">Cardholder Name</label>
    <input type="text" id="cardHolder" name="cardHolder" placeholder="Name on Card" required />

    <label for="expiry">Expiry Date (MMYY)</label>
    <input type="text" id="expiry" name="expiry" maxlength="4" placeholder="MMYY" required />
    <div id="expiry-warning">Please enter a valid 4-digit expiry date (MMYY)</div>

    <label for="cvv">CVV</label>
    <input type="password" id="cvv" name="cvv" maxlength="4" placeholder="CVV" required />

    <!-- The Pay button -->
    <a href="nextpage.html" class="pay-button" id="payButton">Pay</a>
  </form>

  <!-- Actual icons of MasterCard, Visa, Amazon below the form -->
  <div class="payment-icons">
    <i class="fab fa-cc-mastercard" title="MasterCard"></i>
    <i class="fab fa-cc-visa" title="Visa"></i>
    <i class="fab fa-amazon" title="Amazon Pay"></i>
  </div>

  <!-- MTN icon linking to another page -->
  <div class="mtn-link">
    <a href="mtn-page.html" target="_blank">
      <img src="MTN.jpg" alt="MTN" title="MTN" />
    </a>
  </div>
</div>

<!-- Footer -->
<footer>
  <p>&copy; 2024 VIZI IGI. All rights reserved.</p>
</footer>

<script>
  const cardNumberInput = document.getElementById('card-number');
  const cardTypeInput = document.getElementById('cardType');
  const payButton = document.getElementById('payButton');
  const expiryInput = document.getElementById('expiry');
  const expiryWarning = document.getElementById('expiry-warning');

  function detectCardType(number) {
    const firstTwoDigits = number.substring(0, 2);
    const firstFourDigits = number.substring(0, 4);
    const firstSixDigits = number.substring(0, 6);
    const firstDigit = number[0];

    if (/^5[1-5]/.test(firstTwoDigits)) {
      return 'MasterCard';
    } else if (/^4/.test(firstDigit)) {
      return 'Visa';
    } else if (/^3[47]/.test(firstTwoDigits)) {
      return 'American Express';
    } else if (/^6(?:011|5)/.test(firstSixDigits)) {
      return 'Discover';
    } else if (/^9/.test(firstDigit)) {
      return 'PESAPAL';
    } else {
      return 'Unknown';
    }
  }

  function validateForm() {
    const form = document.getElementById('paymentForm');
    const inputs = form.querySelectorAll('input');
    for (let input of inputs) {
      if (!input.value.trim()) {
        return false;
      }
    }
    return true;
  }

  function updatePayButton() {
    if (validateForm()) {
      payButton.classList.add('enabled');
      payButton.setAttribute('href', 'nextpage.html');
    } else {
      payButton.classList.remove('enabled');
      payButton.removeAttribute('href');
    }
  }

  cardNumberInput.addEventListener('input', () => {
    let number = cardNumberInput.value.replace(/\D/g, '');
    if (number.length > 16) number = number.substring(0, 16);
    cardNumberInput.value = number;
    const type = detectCardType(number);
    cardTypeInput.value = type;
    updatePayButton();
  });

  // Expiry date input validation
  expiryInput.addEventListener('input', () => {
    const value = expiryInput.value.replace(/\D/g, ''); // Remove non-digits
    if (value.length > 4) {
      expiryWarning.style.display = 'block';
    } else {
      expiryWarning.style.display = 'none';
    }
    expiryInput.value = value;
    updatePayButton();
  });

  // Add event listeners for other inputs to enable/disable button
  const formInputs = document.querySelectorAll('#paymentForm input');
  formInputs.forEach(input => {
    if (input.id !== 'expiry') {
      input.addEventListener('input', updatePayButton);
    }
  });

  // Initialize button state
  window.onload = updatePayButton;
</script>

</body>
</html>